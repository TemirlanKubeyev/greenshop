<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="/css/main.css">
    <title>Home</title>
</head>
<body>
<header th:insert="blocks/header :: header"></header>
<div class="wrapper">
    <div class="wrapper-box">
        <span class="home-shop"><span class="bold-text">Home</span> / Shop</span>
        <div class="welcome-box">
            <div class="product-view-images for_image">
                <img th:src="@{/images?file=__${product.getPhoto()}__}" class="image">
            </div>
            <div class="product-view-images">
                <h2 th:text="${product.getName()}"></h2>
                <div class="block--first">
                    <span class="price" th:text="'$'+${product.getPrice()}"></span>
                    <div class="star-block">
                        <span th:each="star : ${#numbers.sequence(1, 5)}"
                              th:class="${star <= averageScore ? 'filled-star' : 'empty-star'}">â˜…</span>
                        <span th:text="${reviewQuantity} + ' Customer Review'" class="margin-left"></span>
                    </div>
                </div>
                <h4>Short Description:</h4>
                <br>
                <span class="grey-text" th:text="${product.getShort_desc()}"></span>
                <br>
                <h4>Size:</h4>
                <div  class="size-box-2">
                    <div th:each="size : ${sizes}"
                         th:text="${size.getKey()}" th:class="${size.getValue().equals(product.getSize().name()) ? 'active_size size-box-3' : 'no_active_size size-box-3'}">
                    </div>
                </div>
                <div class="form-buy-add-cart">
                    <form th:action="'/product_view/' + ${product.getId()} + '/dec'" method="post">
                        <button type="submit" class="btn-dec-inc">-</button>
                        <input type="hidden" name="quantity" th:value="${quantity}">
                    </form>
                    <input name="quantity" th:value="${quantity}" class="quantity" readonly>
                    <form th:action="'/product_view/' + ${product.getId()} + '/inc'" method="post">
                        <input type="hidden" name="quantity" th:value="${quantity}">
                        <button type="submit" class="btn-dec-inc">+</button>
                    </form>
                    <form th:action="'/product_view/' + ${product.getId()}" method="post">
                        <input type="hidden" name="quantity" th:value="${quantity}">
                        <input type="hidden" name="product" th:value="${product.id}">
                        <button name="action" value="buy_now" class="btn" type="submit">BUY NOW</button>
                        <button name="action" value="add_to_cart" class="btn" type="submit">ADD TO CART</button>
                    </form>
                </div>
                <span class="grey-text" th:text="'Categories: ' + ${product.getCategory().getName()}"></span>
            </div>
        </div>
        <div class="description_and_reviews">
            <div class="description-text">
                <p th:text="${product.getDescription()}"></p>
            </div>
            <div class="reviews-block" th:each="review : ${product.getReviews()}">
                <span th:text="${review.getReviewText()}"></span>
            </div>
        </div>
        <div class="related-products">
            <div th:each="product : ${relatedProducts}" class="product-box">
                <img th:src="@{/images?file=__${product.getPhoto()}__}">
                <div class="size-box">
                    <a th:href="'/product_view/' + ${product.getId()}" th:text="${product.name}"></a>
                    <span th:text="'$'+${product.price}" class="price"></span>
                </div>
            </div>
            <div th:if="${relatedProducts.isEmpty()}">
                <span>Empty</span>
            </div>
        </div>
    </div>
</div>
</body>
</html>
